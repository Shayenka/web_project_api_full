{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/shaye/react-around-api-full_es/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/shaye/react-around-api-full_es/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/shaye/react-around-api-full_es/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from\"react\";import{Link,useNavigate,useLocation}from\"react-router-dom\";import{CurrentUserContext}from\"../contexts/CurrentUserContext.js\";import{ValidateEmail,ValidatePassword}from\"../utils/Validator.js\";import logo from\"../images/logo.svg\";import{PopUpSuccessfulRegister,PopUpFailedRegister}from\"./InfoTooltip.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Register(_ref){var _ref2;var onRegister=_ref.onRegister,loggedIn=_ref.loggedIn;var currentUser=useContext(CurrentUserContext);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),emailError=_useState6[0],setEmailError=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),passwordError=_useState8[0],setPasswordError=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showPopupSuccessfulRegister=_useState10[0],setShowPopupSuccessfulRegister=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showPopupFailedRegister=_useState12[0],setShowPopupFailedRegister=_useState12[1];var navigate=useNavigate();var location=useLocation();useEffect(function(){setEmail(currentUser.email);setPassword(currentUser.password);},[currentUser]);function handleEmailChange(evt){var newEmail=evt.target.value;setEmail(newEmail);var error=ValidateEmail(newEmail);setEmailError(error);}function handlePasswordChange(evt){var newPassword=evt.target.value;setPassword(newPassword);var error=ValidatePassword(newPassword);setPasswordError(error);}var handleSubmit=function handleSubmit(_x){return(_ref2=_ref2||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(evt){var userRegistered;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:evt.preventDefault();_context.prev=1;_context.next=4;return onRegister(email,password);case 4:userRegistered=_context.sent;if(userRegistered){setShowPopupSuccessfulRegister(true);setShowPopupFailedRegister(false);setTimeout(function(){navigate(\"/signin\");},2000);}else{setShowPopupFailedRegister(true);setShowPopupSuccessfulRegister(false);console.log(\"Error en el registo de usuario.\");}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.error(\"Error en el registo de usuario:\",_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[1,8]]);}))).apply(this,arguments);};return/*#__PURE__*/_jsxs(_Fragment,{children:[location.pathname===\"/signup\"&&!loggedIn?/*#__PURE__*/_jsxs(\"section\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"header__logo\",src:logo,alt:\"logo Around The U.S\"}),/*#__PURE__*/_jsx(\"div\",{className:\"header__container-texts\",children:/*#__PURE__*/_jsx(Link,{to:\"/signin\",className:\"header__text\",style:{textDecoration:\"none\"},children:\"Iniciar Sesi\\xF3n\"})})]}):null,/*#__PURE__*/_jsxs(\"form\",{className:\"container__main\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h3\",{className:\"container__main__title\",children:\"Reg\\xEDstrate\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"email\",placeholder:\"Correo electr\\xF3nico\",className:\"container__main__text\",required:true,minLength:\"2\",maxLength:\"40\",value:email||\"\",onChange:handleEmailChange}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error\",id:\"email-error\",children:emailError}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",placeholder:\"Contrase\\xF1a\",className:\"container__main__text\",required:true,minLength:\"2\",maxLength:\"200\",value:password||\"\",onChange:handlePasswordChange}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error\",id:\"password-error\",children:passwordError})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"container__main__button\",children:\"Reg\\xEDstrate\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container__main__footer\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"container__main__text-footer\",children:\"\\xBFYa eres miembro?\"}),/*#__PURE__*/_jsx(Link,{to:\"/signin\",className:\"container__main__text-footer_link\",style:{textDecoration:\"none\"},children:\"Inicia sesi\\xF3n aqu\\xED\"})]})]}),showPopupSuccessfulRegister&&/*#__PURE__*/_jsx(PopUpSuccessfulRegister,{isOpen:true,onClose:function onClose(){return setShowPopupSuccessfulRegister(false);}}),showPopupFailedRegister&&/*#__PURE__*/_jsx(PopUpFailedRegister,{isOpen:true,onClose:function onClose(){return setShowPopupFailedRegister(false);}})]});}export default Register;","map":{"version":3,"names":["React","useState","useEffect","useContext","Link","useNavigate","useLocation","CurrentUserContext","ValidateEmail","ValidatePassword","logo","PopUpSuccessfulRegister","PopUpFailedRegister","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Register","_ref","_ref2","onRegister","loggedIn","currentUser","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","emailError","setEmailError","_useState7","_useState8","passwordError","setPasswordError","_useState9","_useState10","showPopupSuccessfulRegister","setShowPopupSuccessfulRegister","_useState11","_useState12","showPopupFailedRegister","setShowPopupFailedRegister","navigate","location","handleEmailChange","evt","newEmail","target","value","error","handlePasswordChange","newPassword","handleSubmit","_x","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userRegistered","wrap","_callee$","_context","prev","next","preventDefault","sent","setTimeout","console","log","t0","stop","apply","arguments","children","pathname","className","src","alt","to","style","textDecoration","onSubmit","type","id","placeholder","required","minLength","maxLength","onChange","isOpen","onClose"],"sources":["C:/Users/shaye/react-around-api-full_es/frontend/src/components/Register.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport { Link, useNavigate, useLocation } from \"react-router-dom\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext.js\";\r\nimport { ValidateEmail, ValidatePassword } from \"../utils/Validator.js\";\r\nimport logo from \"../images/logo.svg\";\r\nimport { PopUpSuccessfulRegister, PopUpFailedRegister } from \"./InfoTooltip.js\";\r\n\r\nfunction Register({ onRegister, loggedIn }) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [emailError, setEmailError] = useState(\"\");\r\n  const [passwordError, setPasswordError] = useState(\"\");\r\n  const [showPopupSuccessfulRegister, setShowPopupSuccessfulRegister] =\r\n    useState(false);\r\n  const [showPopupFailedRegister, setShowPopupFailedRegister] = useState(false);\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    setEmail(currentUser.email);\r\n    setPassword(currentUser.password);\r\n  }, [currentUser]);\r\n\r\n  function handleEmailChange(evt) {\r\n    const newEmail = evt.target.value;\r\n    setEmail(newEmail);\r\n    const error = ValidateEmail(newEmail);\r\n    setEmailError(error);\r\n  }\r\n\r\n  function handlePasswordChange(evt) {\r\n    const newPassword = evt.target.value;\r\n    setPassword(newPassword);\r\n    const error = ValidatePassword(newPassword);\r\n    setPasswordError(error);\r\n  }\r\n\r\n  const handleSubmit = async (evt) => {\r\n    evt.preventDefault();\r\n\r\n    try {\r\n      const userRegistered = await onRegister(email, password);\r\n\r\n      if (userRegistered) {\r\n        setShowPopupSuccessfulRegister(true);\r\n        setShowPopupFailedRegister(false);\r\n        setTimeout(() => {\r\n          navigate(\"/signin\");\r\n        },2000)\r\n      } else {\r\n        setShowPopupFailedRegister(true);\r\n        setShowPopupSuccessfulRegister(false);\r\n        console.log(\"Error en el registo de usuario.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error en el registo de usuario:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {location.pathname === \"/signup\" && !loggedIn ? (\r\n        <section className=\"header\">\r\n          <img className=\"header__logo\" src={logo} alt=\"logo Around The U.S\" />\r\n          <div className=\"header__container-texts\">\r\n            <Link\r\n              to=\"/signin\"\r\n              className=\"header__text\"\r\n              style={{ textDecoration: \"none\" }}\r\n            >\r\n              Iniciar Sesión\r\n            </Link>\r\n          </div>\r\n        </section>\r\n      ) : null}\r\n      <form className=\"container__main\" onSubmit={handleSubmit}>\r\n        <h3 className=\"container__main__title\">Regístrate</h3>\r\n        <div>\r\n          <input\r\n            type=\"text\"\r\n            id=\"email\"\r\n            placeholder=\"Correo electrónico\"\r\n            className=\"container__main__text\"\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"40\"\r\n            value={email || \"\"}\r\n            onChange={handleEmailChange}\r\n          />\r\n          <span className=\"popup__input-error\" id=\"email-error\">\r\n            {emailError}\r\n          </span>\r\n          <input\r\n            type=\"password\"\r\n            id=\"password\"\r\n            placeholder=\"Contraseña\"\r\n            className=\"container__main__text\"\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"200\"\r\n            value={password || \"\"}\r\n            onChange={handlePasswordChange}\r\n          />\r\n          <span className=\"popup__input-error\" id=\"password-error\">\r\n            {passwordError}\r\n          </span>\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          className=\"container__main__button\"\r\n        >\r\n          Regístrate\r\n        </button>\r\n        <div className=\"container__main__footer\">\r\n          <h4 className=\"container__main__text-footer\">¿Ya eres miembro?</h4>\r\n          <Link\r\n            to=\"/signin\"\r\n            className=\"container__main__text-footer_link\"\r\n            style={{ textDecoration: \"none\" }}\r\n          >\r\n            Inicia sesión aquí\r\n          </Link>\r\n        </div>\r\n      </form>\r\n      {showPopupSuccessfulRegister && (\r\n        <PopUpSuccessfulRegister\r\n          isOpen={true}\r\n          onClose={() => setShowPopupSuccessfulRegister(false)}\r\n        />\r\n      )}\r\n      {showPopupFailedRegister && (\r\n        <PopUpFailedRegister\r\n          isOpen={true}\r\n          onClose={() => setShowPopupFailedRegister(false)}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}