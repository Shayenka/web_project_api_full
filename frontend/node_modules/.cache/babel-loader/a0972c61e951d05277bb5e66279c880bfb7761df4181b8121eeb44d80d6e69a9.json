{"ast":null,"code":"import _classCallCheck from\"C:/Users/shaye/react-around-api-full_es/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/shaye/react-around-api-full_es/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(_ref){var address=_ref.address,groupId=_ref.groupId,token=_ref.token;_classCallCheck(this,Api);this.token=token;this.address=address;this.groupId=groupId;}_createClass(Api,[{key:\"_useFetch\",value:function _useFetch(url,method,body){return fetch(url,{headers:{authorization:\"Bearer \".concat(this.token),\"Content-Type\":\"application/json\"},method:method,body:JSON.stringify(body)}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"Error: \".concat(res.status));});}},{key:\"getUserInfo\",value:function getUserInfo(){return this._useFetch(\"localhost:3000/users/me\",\"GET\").then(function(result){return result;});}},{key:\"editUserInfo\",value:function editUserInfo(name,about){return this._useFetch(\"localhost:3000/users/me\",\"PATCH\",{name:name,about:about}).then(function(result){return result;});}},{key:\"getCards\",value:function getCards(){return this._useFetch(\"localhost:3000/cards\",\"GET\").then(function(result){return result;});}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardId,isLiked){var method=isLiked?\"PUT\":\"DELETE\";return this._useFetch(\"localhost:3000/cards/likes/\".concat(cardId),method).then(function(result){return result;});}},{key:\"deleteCard\",value:function deleteCard(cardId){return this._useFetch(\"localhost:3000/cards/\".concat(cardId),\"DELETE\").then(function(result){return result;});}},{key:\"changeAvatarProfile\",value:function changeAvatarProfile(userAvatar){return this._useFetch(\"localhost:3000/users/me/avatar\",\"PATCH\",userAvatar).then(function(result){return result;});}},{key:\"addNewCard\",value:function addNewCard(name,link){return this._useFetch(\"localhost:3000/cards\",\"POST\",{name:name,link:link}).then(function(result){return result;});}//   async registerUserApi(email, password) {\n//     return this._useFetch(`localhost:3000/signup`, `POST`, {\n//       email,\n//       password,\n//     })\n//       .then((result) => {\n//         console.log(result);\n//         return result;\n//       })\n//       .catch((err) => console.log(err));\n//   }\n}]);return Api;}();export default Api;","map":{"version":3,"names":["Api","_ref","address","groupId","token","_classCallCheck","_createClass","key","value","_useFetch","url","method","body","fetch","headers","authorization","concat","JSON","stringify","then","res","ok","json","Promise","reject","status","getUserInfo","result","editUserInfo","name","about","getCards","changeLikeCardStatus","cardId","isLiked","deleteCard","changeAvatarProfile","userAvatar","addNewCard","link"],"sources":["C:/Users/shaye/react-around-api-full_es/frontend/src/utils/api.js"],"sourcesContent":["class Api {\r\n  constructor({ address, groupId, token }) {\r\n    this.token = token; \r\n    this.address = address;\r\n    this.groupId = groupId;\r\n  }\r\n\r\n  _useFetch(url, method, body) {\r\n    return fetch(url, {\r\n      headers: {\r\n        authorization: `Bearer ${this.token}`, \r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      method,\r\n      body: JSON.stringify(body),\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  getUserInfo() {\r\n    return this._useFetch(\r\n      \"localhost:3000/users/me\",\r\n      `GET`\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  editUserInfo(name, about) {\r\n    return this._useFetch(\r\n      \"localhost:3000/users/me\",\r\n      `PATCH`,\r\n      { name: name, about: about }\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  getCards() {\r\n    return this._useFetch(\r\n      \"localhost:3000/cards\",\r\n      `GET`\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  changeLikeCardStatus(cardId, isLiked) {\r\n    const method = isLiked ? \"PUT\" : \"DELETE\";\r\n    return this._useFetch(\r\n      `localhost:3000/cards/likes/${cardId}`,\r\n      method\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return this._useFetch(\r\n      `localhost:3000/cards/${cardId}`,\r\n      `DELETE`\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  changeAvatarProfile(userAvatar) {\r\n    return this._useFetch(\r\n      \"localhost:3000/users/me/avatar\",\r\n      `PATCH`,\r\n      userAvatar\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  addNewCard(name, link) {\r\n    return this._useFetch(\r\n      \"localhost:3000/cards\",\r\n      `POST`,\r\n      { name: name, link: link }\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n//   async registerUserApi(email, password) {\r\n//     return this._useFetch(`localhost:3000/signup`, `POST`, {\r\n//       email,\r\n//       password,\r\n//     })\r\n//       .then((result) => {\r\n//         console.log(result);\r\n//         return result;\r\n//       })\r\n//       .catch((err) => console.log(err));\r\n//   }\r\n}\r\n\r\nexport default Api;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}