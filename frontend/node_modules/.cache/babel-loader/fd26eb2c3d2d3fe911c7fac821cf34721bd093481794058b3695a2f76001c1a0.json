{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/shaye/react-around-api-full_es/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/shaye/react-around-api-full_es/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _ref,_ref2,_ref3;var BASE_URL=\"127.0.0.1:3000\";export var registerUser=function registerUser(_x,_x2){return(_ref=_ref||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email,password){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",fetch(\"127.0.0.1:3000/signup\",{method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})}).then(function(response){if(response.status===201){return response.json();}}).then(function(res){return res;}));case 1:case\"end\":return _context.stop();}},_callee);}))).apply(this,arguments);};export var authorize=function authorize(_x3,_x4){return(_ref2=_ref2||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(email,password){var response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"\".concat(BASE_URL,\"/signin\"),{method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})});case 3:response=_context2.sent;if(!response.ok){_context2.next=16;break;}_context2.next=7;return response.json();case 7:data=_context2.sent;if(!(data&&data.token)){_context2.next=13;break;}localStorage.setItem(\"jwt\",data.token);return _context2.abrupt(\"return\",data);case 13:console.error(\"La respuesta del servidor no contiene un token v치lido.\");case 14:_context2.next=17;break;case 16:console.error(\"Error en la respuesta del servidor:\",response.status);case 17:_context2.next=22;break;case 19:_context2.prev=19;_context2.t0=_context2[\"catch\"](0);console.error(\"Error en la solicitud:\",_context2.t0);case 22:case\"end\":return _context2.stop();}},_callee2,null,[[0,19]]);}))).apply(this,arguments);};export var checkTokenValidity=function checkTokenValidity(_x5){return(_ref3=_ref3||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(token){var response,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"\".concat(BASE_URL,\"/users/me\"),{method:\"GET\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}});case 2:response=_context3.sent;if(!response.ok){_context3.next=10;break;}_context3.next=6;return response.json();case 6:data=_context3.sent;return _context3.abrupt(\"return\",data);case 10:throw new Error(\"Token inv치lido\");case 11:case\"end\":return _context3.stop();}},_callee3);}))).apply(this,arguments);};","map":{"version":3,"names":["BASE_URL","registerUser","_x","_x2","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","email","password","wrap","_callee$","_context","prev","next","abrupt","fetch","method","headers","Accept","body","JSON","stringify","then","response","status","json","res","stop","apply","arguments","authorize","_x3","_x4","_ref2","_callee2","data","_callee2$","_context2","concat","sent","ok","token","localStorage","setItem","console","error","t0","checkTokenValidity","_x5","_ref3","_callee3","_callee3$","_context3","Authorization","Error"],"sources":["C:/Users/shaye/react-around-api-full_es/frontend/src/utils/auth.js"],"sourcesContent":["const BASE_URL = \"127.0.0.1:3000\";\r\n\r\nexport const registerUser = async (email, password) => {\r\n  return fetch(`127.0.0.1:3000/signup`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ email, password }),\r\n  })\r\n    .then((response) => {\r\n      if (response.status === 201) {\r\n        return response.json();\r\n      }\r\n    })\r\n    .then((res) => {\r\n      return res;\r\n    });\r\n};\r\n\r\nexport const authorize = async (email, password) => {\r\n  try {\r\n    const response = await fetch(`${BASE_URL}/signin`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ email, password }),\r\n    });\r\n\r\n    if (response.ok) {\r\n      const data = await response.json();\r\n      if (data && data.token) {\r\n        localStorage.setItem(\"jwt\", data.token);\r\n        return data;\r\n      } else {\r\n        console.error(\"La respuesta del servidor no contiene un token v치lido.\");\r\n      }\r\n    } else {\r\n      console.error(\"Error en la respuesta del servidor:\", response.status);\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Error en la solicitud:\", err);\r\n  }\r\n};\r\n\r\nexport const checkTokenValidity = async (token) => {\r\n  const response = await fetch(`${BASE_URL}/users/me`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  if (response.ok) {\r\n    const data = await response.json();\r\n    return data;\r\n  } else {\r\n    throw new Error(\"Token inv치lido\");\r\n  }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}