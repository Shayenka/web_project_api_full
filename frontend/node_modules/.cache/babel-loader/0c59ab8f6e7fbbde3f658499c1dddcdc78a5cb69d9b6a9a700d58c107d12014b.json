{"ast":null,"code":"const BASE_URL = \"http://127.0.0.1:3000\";\n// const token = localStorage.getItem(\"jwt\");\n\nclass Api {\n  constructor({\n    address\n  }) {\n    this.address = address;\n  }\n  _useFetch(token, url, method, body) {\n    return fetch(url, {\n      headers: {\n        authorization: `Bearer ${token}`,\n        \"Content-Type\": \"application/json\"\n      },\n      method,\n      body: JSON.stringify(body)\n    }).then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Error: ${res.status}`);\n    });\n  }\n  getUserInfo(token) {\n    return this._useFetch(token, `${BASE_URL}/users/me`, `GET`).then(result => {\n      return result;\n    });\n  }\n  editUserInfo(token, name, about) {\n    return this._useFetch(token, `${BASE_URL}/users/me`, `PATCH`, {\n      name: name,\n      about: about\n    }).then(result => {\n      return result;\n    });\n  }\n  getCards(token) {\n    return this._useFetch(token, `${BASE_URL}/cards`, `GET`).then(result => {\n      return result;\n    });\n  }\n  changeLikeCardStatus(cardId, isLiked) {\n    const method = isLiked ? \"PUT\" : \"DELETE\";\n    return this._useFetch(`${BASE_URL}/cards/likes/${cardId}`, method).then(result => {\n      return result;\n    });\n  }\n  deleteCard(cardId) {\n    return this._useFetch(`${BASE_URL}/cards/${cardId}`, `DELETE`).then(result => {\n      return result;\n    });\n  }\n  changeAvatarProfile(token, userAvatar) {\n    return this._useFetch(token, `${BASE_URL}/users/me/avatar`, `PATCH`, userAvatar).then(result => {\n      return result;\n    });\n  }\n  addNewCard(name, link) {\n    return this._useFetch(`${BASE_URL}/cards`, `POST`, {\n      name: name,\n      link: link\n    }).then(result => {\n      return result;\n    });\n  }\n}\nexport default Api;","map":{"version":3,"names":["BASE_URL","Api","constructor","address","_useFetch","token","url","method","body","fetch","headers","authorization","JSON","stringify","then","res","ok","json","Promise","reject","status","getUserInfo","result","editUserInfo","name","about","getCards","changeLikeCardStatus","cardId","isLiked","deleteCard","changeAvatarProfile","userAvatar","addNewCard","link"],"sources":["C:/Users/shaye/react-around-api-full_es/frontend/src/utils/api.js"],"sourcesContent":["const BASE_URL = \"http://127.0.0.1:3000\";\r\n// const token = localStorage.getItem(\"jwt\");\r\n\r\nclass Api {\r\n  constructor({ address }) {\r\n    this.address = address;\r\n  }\r\n\r\n  _useFetch(token, url, method, body) {\r\n    \r\n    return fetch(url, {\r\n      headers: {\r\n        authorization: `Bearer ${token}`, \r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      method,\r\n      body: JSON.stringify(body),\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  getUserInfo(token) {\r\n    return this._useFetch(\r\n      token,\r\n      `${BASE_URL}/users/me`,\r\n      `GET`\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  editUserInfo(token, name, about) {\r\n    return this._useFetch(\r\n      token,\r\n      `${BASE_URL}/users/me`,\r\n      `PATCH`,\r\n      { name: name, about: about }\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  getCards(token) {\r\n    return this._useFetch(\r\n      token,\r\n      `${BASE_URL}/cards`,\r\n      `GET`\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  changeLikeCardStatus(cardId, isLiked) {\r\n    const method = isLiked ? \"PUT\" : \"DELETE\";\r\n    return this._useFetch(\r\n      `${BASE_URL}/cards/likes/${cardId}`,\r\n      method \r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return this._useFetch(\r\n      `${BASE_URL}/cards/${cardId}`,\r\n      `DELETE`\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  changeAvatarProfile(token, userAvatar) {\r\n    return this._useFetch(\r\n      token,\r\n      `${BASE_URL}/users/me/avatar`,\r\n      `PATCH`,\r\n      userAvatar\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  addNewCard(name, link) {\r\n    return this._useFetch(\r\n      `${BASE_URL}/cards`,\r\n      `POST`,\r\n      { name: name, link: link }\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n}\r\n\r\nexport default Api;\r\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAG,uBAAuB;AACxC;;AAEA,MAAMC,GAAG,CAAC;EACRC,WAAWA,CAAC;IAAEC;EAAQ,CAAC,EAAE;IACvB,IAAI,CAACA,OAAO,GAAGA,OAAO;EACxB;EAEAC,SAASA,CAACC,KAAK,EAAEC,GAAG,EAAEC,MAAM,EAAEC,IAAI,EAAE;IAElC,OAAOC,KAAK,CAACH,GAAG,EAAE;MAChBI,OAAO,EAAE;QACPC,aAAa,EAAG,UAASN,KAAM,EAAC;QAChC,cAAc,EAAE;MAClB,CAAC;MACDE,MAAM;MACNC,IAAI,EAAEI,IAAI,CAACC,SAAS,CAACL,IAAI;IAC3B,CAAC,CAAC,CAACM,IAAI,CAAEC,GAAG,IAAK;MACf,IAAIA,GAAG,CAACC,EAAE,EAAE;QACV,OAAOD,GAAG,CAACE,IAAI,CAAC,CAAC;MACnB;MACA,OAAOC,OAAO,CAACC,MAAM,CAAE,UAASJ,GAAG,CAACK,MAAO,EAAC,CAAC;IAC/C,CAAC,CAAC;EACJ;EAEAC,WAAWA,CAAChB,KAAK,EAAE;IACjB,OAAO,IAAI,CAACD,SAAS,CACnBC,KAAK,EACJ,GAAEL,QAAS,WAAU,EACrB,KACH,CAAC,CAACc,IAAI,CAAEQ,MAAM,IAAK;MACjB,OAAOA,MAAM;IACf,CAAC,CAAC;EACJ;EAEAC,YAAYA,CAAClB,KAAK,EAAEmB,IAAI,EAAEC,KAAK,EAAE;IAC/B,OAAO,IAAI,CAACrB,SAAS,CACnBC,KAAK,EACJ,GAAEL,QAAS,WAAU,EACrB,OAAM,EACP;MAAEwB,IAAI,EAAEA,IAAI;MAAEC,KAAK,EAAEA;IAAM,CAC7B,CAAC,CAACX,IAAI,CAAEQ,MAAM,IAAK;MACjB,OAAOA,MAAM;IACf,CAAC,CAAC;EACJ;EAEAI,QAAQA,CAACrB,KAAK,EAAE;IACd,OAAO,IAAI,CAACD,SAAS,CACnBC,KAAK,EACJ,GAAEL,QAAS,QAAO,EAClB,KACH,CAAC,CAACc,IAAI,CAAEQ,MAAM,IAAK;MACjB,OAAOA,MAAM;IACf,CAAC,CAAC;EACJ;EAEAK,oBAAoBA,CAACC,MAAM,EAAEC,OAAO,EAAE;IACpC,MAAMtB,MAAM,GAAGsB,OAAO,GAAG,KAAK,GAAG,QAAQ;IACzC,OAAO,IAAI,CAACzB,SAAS,CAClB,GAAEJ,QAAS,gBAAe4B,MAAO,EAAC,EACnCrB,MACF,CAAC,CAACO,IAAI,CAAEQ,MAAM,IAAK;MACjB,OAAOA,MAAM;IACf,CAAC,CAAC;EACJ;EAEAQ,UAAUA,CAACF,MAAM,EAAE;IACjB,OAAO,IAAI,CAACxB,SAAS,CAClB,GAAEJ,QAAS,UAAS4B,MAAO,EAAC,EAC5B,QACH,CAAC,CAACd,IAAI,CAAEQ,MAAM,IAAK;MACjB,OAAOA,MAAM;IACf,CAAC,CAAC;EACJ;EAEAS,mBAAmBA,CAAC1B,KAAK,EAAE2B,UAAU,EAAE;IACrC,OAAO,IAAI,CAAC5B,SAAS,CACnBC,KAAK,EACJ,GAAEL,QAAS,kBAAiB,EAC5B,OAAM,EACPgC,UACF,CAAC,CAAClB,IAAI,CAAEQ,MAAM,IAAK;MACjB,OAAOA,MAAM;IACf,CAAC,CAAC;EACJ;EAEAW,UAAUA,CAACT,IAAI,EAAEU,IAAI,EAAE;IACrB,OAAO,IAAI,CAAC9B,SAAS,CAClB,GAAEJ,QAAS,QAAO,EAClB,MAAK,EACN;MAAEwB,IAAI,EAAEA,IAAI;MAAEU,IAAI,EAAEA;IAAK,CAC3B,CAAC,CAACpB,IAAI,CAAEQ,MAAM,IAAK;MACjB,OAAOA,MAAM;IACf,CAAC,CAAC;EACJ;AAEF;AAEA,eAAerB,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}