{"ast":null,"code":"import _classCallCheck from\"C:/Users/shaye/web_project_api_full/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/shaye/web_project_api_full/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var BASE_URL=\"http://127.0.0.1:3000\";var Api=/*#__PURE__*/function(){function Api(_ref){var address=_ref.address;_classCallCheck(this,Api);this.address=address;}_createClass(Api,[{key:\"_useFetch\",value:function _useFetch(token,url,method,body){return fetch(url,{headers:{authorization:\"Bearer \".concat(token),\"Content-Type\":\"application/json\"},method:method,body:JSON.stringify(body)}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"Error: \".concat(res.status));});}},{key:\"getUserInfo\",value:function getUserInfo(token){return this._useFetch(token,\"\".concat(BASE_URL,\"/users/me\"),\"GET\").then(function(result){return result;});}},{key:\"editUserInfo\",value:function editUserInfo(token,name,about){return this._useFetch(token,\"\".concat(BASE_URL,\"/users/me\"),\"PATCH\",{name:name,about:about}).then(function(result){return result;});}},{key:\"getCards\",value:function getCards(token){return this._useFetch(token,\"\".concat(BASE_URL,\"/cards\"),\"GET\").then(function(result){return result;});}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(token,cardId,isLiked){var method=isLiked?\"PUT\":\"DELETE\";return this._useFetch(token,\"\".concat(BASE_URL,\"/cards/likes/\").concat(cardId),method).then(function(result){return result;});}},{key:\"deleteCard\",value:function deleteCard(token,cardId){return this._useFetch(token,\"\".concat(BASE_URL,\"/cards/\").concat(cardId),\"DELETE\").then(function(result){return result;});}},{key:\"changeAvatarProfile\",value:function changeAvatarProfile(token,userAvatar){return this._useFetch(token,\"\".concat(BASE_URL,\"/users/me/avatar\"),\"PATCH\",userAvatar).then(function(result){return result;});}},{key:\"addNewCard\",value:function addNewCard(token,name,link){return this._useFetch(token,\"\".concat(BASE_URL,\"/cards\"),\"POST\",{name:name,link:link}).then(function(result){return result;});}}]);return Api;}();export default Api;","map":{"version":3,"names":["BASE_URL","Api","_ref","address","_classCallCheck","_createClass","key","value","_useFetch","token","url","method","body","fetch","headers","authorization","concat","JSON","stringify","then","res","ok","json","Promise","reject","status","getUserInfo","result","editUserInfo","name","about","getCards","changeLikeCardStatus","cardId","isLiked","deleteCard","changeAvatarProfile","userAvatar","addNewCard","link"],"sources":["C:/Users/shaye/web_project_api_full/frontend/src/utils/api.js"],"sourcesContent":["const BASE_URL = \"http://127.0.0.1:3000\";\r\n\r\nclass Api {\r\n  constructor({ address }) {\r\n    this.address = address;\r\n  }\r\n\r\n  _useFetch(token, url, method, body) {\r\n    \r\n    return fetch(url, {\r\n      headers: {\r\n        authorization: `Bearer ${token}`, \r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      method,\r\n      body: JSON.stringify(body),\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  getUserInfo(token) {\r\n    return this._useFetch(\r\n      token,\r\n      `${BASE_URL}/users/me`,\r\n      `GET`\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  editUserInfo(token, name, about) {\r\n    return this._useFetch(\r\n      token,\r\n      `${BASE_URL}/users/me`,\r\n      `PATCH`,\r\n      { name: name, about: about }\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  getCards(token) {\r\n    return this._useFetch(\r\n      token,\r\n      `${BASE_URL}/cards`,\r\n      `GET`\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  changeLikeCardStatus(token, cardId, isLiked) {\r\n    const method = isLiked ? \"PUT\" : \"DELETE\";\r\n    return this._useFetch(\r\n      token,\r\n      `${BASE_URL}/cards/likes/${cardId}`,\r\n      method \r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  deleteCard(token, cardId) {\r\n    return this._useFetch(\r\n      token,\r\n      `${BASE_URL}/cards/${cardId}`,\r\n      `DELETE`\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  changeAvatarProfile(token, userAvatar) {\r\n    return this._useFetch(\r\n      token,\r\n      `${BASE_URL}/users/me/avatar`,\r\n      `PATCH`,\r\n      userAvatar\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  addNewCard(token, name, link) {\r\n    return this._useFetch(\r\n      token,\r\n      `${BASE_URL}/cards`,\r\n      `POST`,\r\n      { name: name, link: link }\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n}\r\n\r\nexport default Api;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}