{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/shaye/react-around-api-full_es/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/shaye/react-around-api-full_es/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _ref,_ref2,_ref3;var BASE_URL=\"https://register.nomoreparties.co\";export var registerUser=function registerUser(_x,_x2){return(_ref=_ref||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email,password){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",fetch(\"\".concat(BASE_URL,\"/signup\"),{method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})}).then(function(response){if(response.status===201){return response.json();}}).then(function(res){return res;}));case 1:case\"end\":return _context.stop();}},_callee);}))).apply(this,arguments);};export var authorize=function authorize(_x3,_x4){return(_ref2=_ref2||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(email,password){var response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"\".concat(BASE_URL,\"/signin\"),{method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})});case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:data=_context2.sent;if(!data){_context2.next=10;break;}localStorage.setItem(\"jwt\",data.token);return _context2.abrupt(\"return\",data);case 10:_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 15:case\"end\":return _context2.stop();}},_callee2,null,[[0,12]]);}))).apply(this,arguments);};export var checkTokenValidity=function checkTokenValidity(_x5){return(_ref3=_ref3||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(token){var response,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"\".concat(BASE_URL,\"/users/me\"),{method:\"GET\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}});case 2:response=_context3.sent;if(!response.ok){_context3.next=10;break;}_context3.next=6;return response.json();case 6:data=_context3.sent;return _context3.abrupt(\"return\",data);case 10:throw new Error(\"Token inválido\");case 11:case\"end\":return _context3.stop();}},_callee3);}))).apply(this,arguments);};","map":{"version":3,"names":["BASE_URL","registerUser","_x","_x2","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","email","password","wrap","_callee$","_context","prev","next","abrupt","fetch","concat","method","headers","Accept","body","JSON","stringify","then","response","status","json","res","stop","apply","arguments","authorize","_x3","_x4","_ref2","_callee2","data","_callee2$","_context2","sent","localStorage","setItem","token","t0","console","error","checkTokenValidity","_x5","_ref3","_callee3","_callee3$","_context3","Authorization","ok","Error"],"sources":["C:/Users/shaye/react-around-api-full_es/frontend/src/utils/auth.js"],"sourcesContent":["const BASE_URL = \"https://register.nomoreparties.co\";\r\n\r\nexport const registerUser = async (email, password) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ email, password }),\r\n  })\r\n    .then((response) => {\r\n      if (response.status === 201) {\r\n        return response.json();\r\n      }\r\n    })\r\n    .then((res) => {\r\n      return res;\r\n    });\r\n};\r\n\r\nexport const authorize = async (email, password) => {\r\n  try {\r\n    const response = await fetch(`${BASE_URL}/signin`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ email, password }),\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    if (data) {\r\n      localStorage.setItem(\"jwt\", data.token);\r\n      return data;\r\n    }\r\n  } catch (err) {\r\n    console.error(err);\r\n  }\r\n};\r\n\r\nexport const checkTokenValidity = async (token) => {\r\n  const response = await fetch(`${BASE_URL}/users/me`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  if (response.ok) {\r\n    const data = await response.json();\r\n    return data;\r\n  } else {\r\n    throw new Error(\"Token inválido\");\r\n  }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}