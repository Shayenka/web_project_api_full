{"ast":null,"code":"const BASE_URL = \"http://127.0.0.1:3000\";\nclass Api {\n  constructor({\n    address,\n    groupId,\n    token\n  }) {\n    this.token = token;\n    this.address = address;\n    this.groupId = groupId;\n  }\n  _useFetch(url, method, body) {\n    console.log(\"body:\", method);\n    return fetch(url, {\n      headers: {\n        authorization: `Bearer ${this.token}`,\n        \"Content-Type\": \"application/json\"\n      },\n      method,\n      body: JSON.stringify(body)\n    }).then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Error: ${res.status}`);\n    });\n  }\n  getUserInfo() {\n    return this._useFetch(`${BASE_URL}/users/me`, `GET`).then(result => {\n      return result;\n    });\n  }\n  editUserInfo({\n    name,\n    about\n  }) {\n    return this._useFetch(`${BASE_URL}/users/me`, `PATCH`, {\n      name: name,\n      about: about\n    }).then(result => {\n      return result;\n    });\n  }\n  getCards() {\n    return this._useFetch(`${BASE_URL}/cards`, `GET`).then(result => {\n      return result;\n    });\n  }\n  changeLikeCardStatus(cardId, isLiked) {\n    const method = isLiked ? \"PUT\" : \"DELETE\";\n    return this._useFetch(`${BASE_URL}/cards/likes/${cardId}`, method).then(result => {\n      return result;\n    });\n  }\n  deleteCard(cardId) {\n    return this._useFetch(`${BASE_URL}/cards/${cardId}`, `DELETE`).then(result => {\n      return result;\n    });\n  }\n  changeAvatarProfile(userAvatar) {\n    return this._useFetch(`${BASE_URL}/users/me/avatar`, `PATCH`, userAvatar).then(result => {\n      return result;\n    });\n  }\n  addNewCard(name, link) {\n    return this._useFetch(`${BASE_URL}/cards`, `POST`, {\n      name: name,\n      link: link\n    }).then(result => {\n      return result;\n    });\n  }\n}\nexport default Api;","map":{"version":3,"names":["BASE_URL","Api","constructor","address","groupId","token","_useFetch","url","method","body","console","log","fetch","headers","authorization","JSON","stringify","then","res","ok","json","Promise","reject","status","getUserInfo","result","editUserInfo","name","about","getCards","changeLikeCardStatus","cardId","isLiked","deleteCard","changeAvatarProfile","userAvatar","addNewCard","link"],"sources":["C:/Users/shaye/react-around-api-full_es/frontend/src/utils/api.js"],"sourcesContent":["const BASE_URL = \"http://127.0.0.1:3000\";\r\n\r\nclass Api {\r\n  constructor({ address, groupId, token }) {\r\n    this.token = token; \r\n    this.address = address;\r\n    this.groupId = groupId;\r\n  }\r\n\r\n  _useFetch(url, method, body) {\r\n    console.log(\"body:\", method)\r\n    return fetch(url, {\r\n      headers: {\r\n        authorization: `Bearer ${this.token}`, \r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      method,\r\n      body: JSON.stringify(body),\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  getUserInfo() {\r\n    return this._useFetch(\r\n      `${BASE_URL}/users/me`,\r\n      `GET`\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  editUserInfo({name, about}) {\r\n    return this._useFetch(\r\n      `${BASE_URL}/users/me`,\r\n      `PATCH`,\r\n      { name: name, about: about }\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  getCards() {\r\n    return this._useFetch(\r\n      `${BASE_URL}/cards`,\r\n      `GET`\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  changeLikeCardStatus(cardId, isLiked) {\r\n    const method = isLiked ? \"PUT\" : \"DELETE\";\r\n    return this._useFetch(\r\n      `${BASE_URL}/cards/likes/${cardId}`,\r\n      method \r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return this._useFetch(\r\n      `${BASE_URL}/cards/${cardId}`,\r\n      `DELETE`\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  changeAvatarProfile(userAvatar) {\r\n    return this._useFetch(\r\n      `${BASE_URL}/users/me/avatar`,\r\n      `PATCH`,\r\n      userAvatar\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n  addNewCard(name, link) {\r\n    return this._useFetch(\r\n      `${BASE_URL}/cards`,\r\n      `POST`,\r\n      { name: name, link: link }\r\n    ).then((result) => {\r\n      return result;\r\n    });\r\n  }\r\n\r\n}\r\n\r\nexport default Api;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}